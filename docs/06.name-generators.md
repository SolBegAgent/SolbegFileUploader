Structure
=========

- [Introduction](#introduction)
    * [Configure](#configure)
- [Existing Name Generators](#existing-name-generators)
    * [Random Name Generator](#random-name-generator)
    * [Origin Name Generator](#origin-name-generator)
- [Custom Name Generator](#custom-name-generator)


Introduction
============

For generating file paths for new files the name generators are used.

So the logic in which folder structure your uploaded files are stored,
and the logic how your uploaded files are named,
concentrated in `name_generator` that your storage uses.

Configure
---------

To configure which name generator must be used,
you may change `name_generator` of your
`main_storage` or `temp_storage` resp.

The config may have the followings formats:
- string, the name of generator class
- array, without 'class' property, then [Random Generator](#random-name-generator) class will be used
- array, with 'class' property

Examples:

```php
'name_generator' => \Bicycle\FilesManager\File\NameGenerators\OriginNameGenerator::class,

'name_generator' => ['length' => 16, 'subdirs_length' => 4], // RandomNameGenerator will be used

'name_generator' => [
    'class' => \Bicycle\FilesManager\File\NameGenerators\OriginNameGenerator::class,
    'length' => 16,
    'subdirs_length' => 4,
],

```

Existing Name Generators
========================

Random Name Generator
---------------------

The `\Bicycle\FilesManager\File\NameGenerators\RandomNameGenerator`
generates new random names for files.

So path for origin file has the following schema:

` {global_prefix}/{context_name}/{random_subdir}/{random_filename}.{extension}`

Where:

- `global_prefix`: may be configured through `global_prefix` setting,
Default is `uploads` for main storages and `temp` for temporary storages.

- `context_name`: the name of appropriate context

- `random_subdir`: a set of random chars.
Default length is 4, but may be configured through setting `subdirs_length`.
Before generating new subdir, the generator checks whether one of existing subdirs may be used.
It means whether `max_subdir_files_count`, which is 1000 by default, is not exceed.

- `random_filename`: a set of random chars.
Default length is 16, but may be configured through setting `length`.

- `extension`: the generator will try to use extension from source file.
But if source extension consists of any special or invalid chars,
then file will be saved without any extension.

WIP

Origin Name Generator
---------------------

WIP

Custom Name Generator
=====================

WIP
